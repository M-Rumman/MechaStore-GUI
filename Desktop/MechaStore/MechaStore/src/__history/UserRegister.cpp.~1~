//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "UserRegister.h"
#include "Customer.h"
#include "PortalManager.h"

extern PortalManager store;
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TUserRegistrationForm *UserRegistrationForm;
//---------------------------------------------------------------------------
__fastcall TUserRegistrationForm::TUserRegistrationForm(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------
void __fastcall TUserRegistrationForm::btnRegisterClick(TObject *Sender)
{
    String user = edtUsername->Text;
    String pass = edtPassword->Text;
    String phone = edtWhatsapp->Text;

    Customer *c = new Customer(store.generateUserId(),
                               std::string(user.c_str()),
                               std::string(pass.c_str()),
                               std::string(phone.c_str()));
    store.registerUser(c);
    store.saveUsers();

    ShowMessage("Registration successful!");
    Close();
}

